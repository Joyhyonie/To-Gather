<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.greedy.togather.user.project.dao.ProjectMapper">

	<!-- 카테고리 선택 or 검색어 입력을 통해 조회된 프로젝트들의 조회를 위한 resultMap -->
	<resultMap type="com.greedy.togather.user.project.dto.ProjectDTO" id="viewProjectsResultMap">
		<id property="projNo" column="PROJ_NO"/>
		<result property="projName" column="PROJ_NM"/>
		<result property="projSummary" column="PROJ_SUMMARY"/>
		<result property="fundingEndDate" column="FUNDING_END_DATE"/>
		<result property="fundingGoal" column="FUNDING_GOAL"/>
		<result property="fundingAchive" column="FUNDING_ACHIVE"/>
		<result property="projStatus" column="PROJ_STATUS"/>
		
		<association property="category" resultMap="categoryResultMap"/>
		<association property="maker" resultMap="makerResultMap"/>
		<collection property="likeList" resultMap="likeResultMap"/>
	</resultMap>

	<!-- 프로젝트의 상세 페이지 조회를 위한 resultMap -->
	<resultMap type="com.greedy.togather.user.project.dto.ProjectDTO" id="viewProjectDetailResultMap">
		<id property="projNo" column="PROJ_NO"/>
		<result property="projName" column="PROJ_NM"/>
		<result property="projDetail" column="PROJ_DETAIL"/>
		<result property="projInfoTitle" column="PROJ_INFO_TITLE"/>
		<result property="projInfoBody" column="PROJ_INFO_BODY"/>
		<result property="fundingEndDate" column="FUNDING_END_DATE"/>
		<result property="fundingGoal" column="FUNDING_GOAL"/>
		<result property="fundingAchive" column="FUNDING_ACHIVE"/>
		<result property="projStatus" column="PROJ_STATUS"/>
		<result property="projReview" column="PROJ_REVIEW"/>
		
		<association property="maker" resultMap="makerResultMap"/>
		<collection property="rewardList" resultMap="rewardResultMap"/>
		<collection property="likeList" resultMap="likeResultMap"/>
		<collection property="replyList" resultMap="replyResultMap"/>
	</resultMap>

	<resultMap type="com.greedy.togather.user.project.dto.CategoryDTO" id="categoryResultMap">
		<id property="categoryNo" column="CATEGORY_NO"/>
		<result property="projField" column="PROJ_FIELD"/>
	</resultMap>
	
	<resultMap type="com.greedy.togather.user.project.dto.MakerDTO" id="makerResultMap">
		<id property="projNo" column="PROJ_NO"/>
		<result property="makerProfileName" column="MAKER_PROFILE_NM"/>
		<result property="makerName" column="MAKER_NM"/>
		<result property="maerAddress" column="MAKER_ADDRESS"/>
		<result property="makerPhone" column="MAKER_PHONE"/>
		<result property="makerEmail" column="MAKER_EMAIL"/>
		<result property="makerIntro" column="MAKER_INTRO"/>
	</resultMap>
	
	<resultMap type="com.greedy.togather.user.project.dto.LikeDTO" id="likeResultMap">
		<id property="likeNo" column="LIKE_NO"/>
		<result property="userNo" column="USER_NO"/>
		<result property="projNo" column="PROJ_NO"/>
	</resultMap>
	
	<resultMap type="com.greedy.togather.user.project.dto.RewardDTO" id="rewardResultMap">
		<id property="rewardNo" column="REWARD_NO"/>
		<result property="projNo" column="PROJ_NO"/>
		<result property="rewardName" column="REWARD_NM"/>
		<result property="rewardContent" column="REWARD_CONTENT"/>
		<result property="rewardPrice" column="REWARD_PRICE"/>
		<result property="rewardFee" column="REWARD_FEE"/>
		<result property="rewardDueDate" column="REWARD_DUE_DATE"/>
	</resultMap>
	
	<resultMap type="com.greedy.togather.user.project.dto.ReplyDTO" id="replyResultMap">
		<id property="replyNo" column="REPLY_NO"/>
		<result property="projNo" column="PROJ_NO"/>
		<result property="replyBody" column="REPLY_BODY"/>
		<result property="replyRegDate" column="REPLY_REG_DATE"/>
		<result property="donation" column="DONATION"/>
		
		<association property="writer" javaType="com.greedy.togather.user.project.dto.ReplyWriterDTO">
			<id property="userNo" column="USER_NO"/>
	        <result property="email" column="EMAIL"/>
	        <result property="profileName" column="PROFILE_NM"/>
		</association>
	</resultMap>


	
	
	<select id="selectProjectsByCategory" resultMap="viewProjectsResultMap">

	</select>
	






















</mapper>